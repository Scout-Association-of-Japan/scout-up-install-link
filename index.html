<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BoyScout UP! Install Link</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding-top: 20vh;
        }

        .message {
            font-size: 1.2em;
            line-height: 2em;
        }
    </style>
    <script>
        window.onload = function () {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;

            if (/iPhone|iPad|iPod/.test(userAgent)) {
                // iOS: アプリがインストール済みの場合はアプリを開く、未インストールの場合はApp Storeへ
                tryOpenApp("scoutup://", "https://apps.apple.com/jp/app/id6744021399");
            } else if (/Android/.test(userAgent)) {
                // Android: アプリがインストール済みの場合はアプリを開く、未インストールの場合はGoogle Play Storeへ
                tryOpenApp("intent://open#Intent;scheme=scoutup;package=org.ScoutAssociationofJapan.scoutup;end", "https://play.google.com/store/apps/details?id=org.ScoutAssociationofJapan.scoutup");
            } else {
                // PCなどその他のデバイス
                document.getElementById("message").style.display = "block";
            }
        };

        function tryOpenApp(appUrl, storeUrl) {
            // アプリを開く試行
            const startTime = Date.now();
            window.location.href = appUrl;

            // 一定時間後にアプリが開かなかった場合はストアへリダイレクト
            setTimeout(function() {
                // ページがまだアクティブ（アプリが開かなかった）場合はストアへ
                if (Date.now() - startTime < 2500) {
                    window.location.href = storeUrl;
                }
            }, 2000);
        }
    </script>
</head>

<body>
    <div id="message" class="message" style="display: none;">
        <strong>BoyScout UP!</strong>はモバイルアプリです。<br />
        スマートフォンからアクセスしてください📱
    </div>
</body>

</html>